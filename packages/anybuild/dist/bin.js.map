{"version":3,"sources":["../../utils/src/index.ts","../../check/src/index.ts","../src/index.ts"],"sourcesContent":["import chalk from 'chalk'\r\n\r\nexport function logRed(message: string) {\r\n    console.error(chalk.bold.red(message))\r\n}\r\n\r\nexport function error(message: string, willExit?: 'exit') {\r\n    if (willExit === 'exit') {\r\n        // process.exit(-1)\r\n        throw new Error(message)\r\n    }else{\r\n        console.error(chalk.bold.red(message))\r\n    }\r\n}\r\n\r\nexport function upperFirst(word: string) {\r\n    return word.charAt(0).toUpperCase() + word.slice(1)\r\n}\r\n","import path from 'path'\r\nimport fs from 'fs-extra'\r\nimport { error } from '@anybuild/utils'\r\n\r\nconst jsonFile = path.resolve(process.cwd(), './package.json')\r\nif (!fs.pathExistsSync(jsonFile)) {\r\n    error('不存在package.json', 'exit')\r\n}\r\n\r\nconst pkgInfo = fs.readJSONSync(jsonFile)\r\nconst buildinfo = pkgInfo.buildinfo\r\n\r\nif (buildinfo === undefined) {\r\n    error('package.json不存在buildinfo字段', 'exit')\r\n}\r\n\r\nexport { jsonFile, pkgInfo, buildinfo }\r\n","import { Command } from 'commander'\r\nimport { error, logRed } from '@anybuild/utils'\r\nimport { createRequire } from 'node:module'\r\n\r\nconst program = new Command()\r\n\r\nprogram.name(__NAME__)\r\nprogram.version(__VERSION__, '-v, --version').description('查看当前版本号')\r\nprogram.helpOption('-h --help', '显示帮助信息')\r\nprogram.showHelpAfterError(`(${__NAME__} -h 查看帮助信息)`)\r\n\r\nlet reportErrorMessage\r\n\r\ntry {\r\n    await import('@anybuild/check')\r\n    reportErrorMessage = undefined\r\n} catch (error) {\r\n    reportErrorMessage = error.message\r\n}\r\n\r\nprogram\r\n    .option('-w, --watch', '开发模式')\r\n    .option('-s, --site', '站点模式')\r\n    .option('--ssr', 'ssr模式')\r\n    .option('-d, --debug [value]', 'Debug日志')\r\n    .description('构建')\r\n    .action(async ({ watch, debug, site, ssr }) => {\r\n        if (reportErrorMessage) {\r\n            error(reportErrorMessage, \"exit\")\r\n        }\r\n    })\r\n\r\nprogram\r\n    .command('init')\r\n    .description('初始化项目')\r\n    .action(async ({}) => {\r\n        error('开发中，暂不可用')\r\n    })\r\n\r\nprogram.parse(process.argv)\r\n"],"mappings":";;;;;;;;;;;;AAAA,OAAO,WAAW;AAMX,SAAS,MAAM,SAAiB,UAAmB;AACtD,MAAI,aAAa,QAAQ;AAErB,UAAM,IAAI,MAAM,OAAO;AAAA,EAC3B,OAAK;AACD,YAAQ,MAAM,MAAM,KAAK,IAAI,OAAO,CAAC;AAAA,EACzC;AACJ;AAbA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO,UAAU;AACjB,OAAO,QAAQ;AADf,IAIM,UAKA,SACA;AAVN,IAAAA,YAAA;AAAA;AAEA;AAEA,IAAM,WAAW,KAAK,QAAQ,QAAQ,IAAI,GAAG,gBAAgB;AAC7D,QAAI,CAAC,GAAG,eAAe,QAAQ,GAAG;AAC9B,YAAM,kCAAmB,MAAM;AAAA,IACnC;AAEA,IAAM,UAAU,GAAG,aAAa,QAAQ;AACxC,IAAM,YAAY,QAAQ;AAE1B,QAAI,cAAc,QAAW;AACzB,YAAM,uDAA8B,MAAM;AAAA,IAC9C;AAAA;AAAA;;;ACbA;AADA,SAAS,eAAe;AAIxB,IAAM,UAAU,IAAI,QAAQ;AAE5B,QAAQ,KAAK,UAAQ;AACrB,QAAQ,QAAQ,SAAa,eAAe,EAAE,YAAY,4CAAS;AACnE,QAAQ,WAAW,aAAa,sCAAQ;AACxC,QAAQ,mBAAmB,IAAI,qDAAqB;AAEpD,IAAI;AAEJ,IAAI;AACA,QAAM;AACN,uBAAqB;AACzB,SAASC,QAAP;AACE,uBAAqBA,OAAM;AAC/B;AAEA,QACK,OAAO,eAAe,0BAAM,EAC5B,OAAO,cAAc,0BAAM,EAC3B,OAAO,SAAS,iBAAO,EACvB,OAAO,uBAAuB,mBAAS,EACvC,YAAY,cAAI,EAChB,OAAO,OAAO,EAAE,OAAO,OAAO,MAAM,IAAI,MAAM;AAC3C,MAAI,oBAAoB;AACpB,UAAM,oBAAoB,MAAM;AAAA,EACpC;AACJ,CAAC;AAEL,QACK,QAAQ,MAAM,EACd,YAAY,gCAAO,EACnB,OAAO,OAAO,CAAC,MAAM;AAClB,QAAM,kDAAU;AACpB,CAAC;AAEL,QAAQ,MAAM,QAAQ,IAAI;","names":["init_src","error"]}